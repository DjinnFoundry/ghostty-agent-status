# >>> codex-ghostty-status >>>
# Multi-agent wrappers: codex, claude-code (claude), and opencode.
_cgs_wrap_agent() {
  local agent_cmd="$1"
  local agent_title="$1"
  shift

  if [[ "$agent_title" == "claude" || "$agent_title" == "claude-code" ]]; then
    agent_title="claude-code"
  fi

  if [[ ! -t 0 || ! -t 1 ]]; then
    command "$agent_cmd" "$@"
    return $?
  fi

  local project
  project="${PWD:t}"
  [[ -z "$project" ]] && project="/"

  if ! command -v "$agent_cmd" >/dev/null 2>&1; then
    command "$agent_cmd" "$@"
    return $?
  fi

  if ! command -v python3 >/dev/null 2>&1 || [[ ! -f "__PROXY_PATH__" ]]; then
    print -rn -- "\e]2;${project} - ${agent_title} - ðŸŸ¡ working\a"
    command "$agent_cmd" "$@"
    return $?
  fi

  python3 "__PROXY_PATH__" "$project" "$agent_cmd" "$@"
  return $?
}

codex() {
  _cgs_wrap_agent "codex" "$@"
  return $?
}

claude() {
  _cgs_wrap_agent "claude" "$@"
  return $?
}

claude-code() {
  _cgs_wrap_agent "claude-code" "$@"
  return $?
}

opencode() {
  _cgs_wrap_agent "opencode" "$@"
  return $?
}
# <<< codex-ghostty-status <<<
